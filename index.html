<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Key Player</title>
<style>
body{font-family:sans-serif;text-align:center;padding:20px;}
button{padding:10px 16px;margin:5px;}
</style>
</head>

<body>

<h2>キー変更プレイヤー</h2>

<input type="file" id="file"><br><br>

<audio id="audio" controls></audio>

<h3>キー（半音）</h3>
<button onclick="down()">−</button>
<span id="val">0</span>
<button onclick="up()">＋</button>

<script>
const audio = document.getElementById("audio");
let pitch = 0;

document.getElementById("file").onchange = e=>{
    audio.src = URL.createObjectURL(e.target.files[0]);
};

function update(){
    // 半音 → 再生速度変換
    audio.playbackRate = Math.pow(2, pitch/12);
    document.getElementById("val").innerText = pitch;
}

function up(){
    pitch++;
    update();
}

function down(){
    pitch--;
    update();
}
</script>

</body>
</html>
